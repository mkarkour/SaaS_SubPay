# Subscription Payment Management Platform

### Description

This project involves the creation of a platform designed to enable Software as a Service (SaaS) companies to collect and monitor payments from their customers. The platform follows an API-first approach, meaning that all operations can be performed through API calls, eliminating the need for a graphical user interface.

### Companies & Customers

The platform allows SaaS companies to create accounts in which they must specify their company names, addresses, VAT IDs, and bank account numbers. Companies can then add customers to their accounts, with customers providing traditional billing information.

### Quotes, Subscriptions, Invoices

The platform exclusively supports the sale of subscription-based products by companies. Customers of these companies subscribe to one or more monthly subscriptions, with payments due each month. The platform does not support one-off purchases.

Companies can efficiently create quotes for their customers. A quote can include multiple line items, each representing:

1. A subscription for a product or service.
2. A quantity.
3. A price, including its currency.

All prices are presented excluding Value Added Tax (VAT). The platform automatically calculates VAT (set at 21%) on the quote, displaying both the total excluding VAT and the total including VAT in JSON format.

Once a customer accepts a quote, companies can easily convert the quote into an active subscription with a single API call. For the purposes of this project, customers are required to use the API to check for pending invoices before proceeding with payment.

### Payments

Payments for this assignment are simulated. To make a payment for a pending invoice, customers submit an API call containing their credit card details and the reference number of the invoice. Payment acceptance is contingent on two conditions:

1. Validity of the credit card number.
2. Existence of the reference number in the database.

### Analytics

Companies can access basic business statistics in euros, including:

1. Monthly Recurring Revenue (MRR): Predictable total revenue generated by a company from all active subscriptions in a particular month.

2. Annual Recurring Revenue (ARR): The value of recurring revenue from term subscriptions, normalized for a single calendar year.

3. Number of customers.

4. Average revenues per customer.

5. A table displaying all customers and their current subscriptions.

### Currency

The platform consistently displays amounts in euros, using exchange rates obtained from external APIs and stored in the database.

### Credit Card Validation

Credit card numbers are validated using the Luhn algorithm, which is also known as the Luhn formula. This algorithm is used in real-world applications to verify credit or debit card numbers and SIM card serial numbers.

The validation process is as follows:

1. Remove the rightmost digit (checking digit) from the card number, excluding it from most calculations.

2. Reverse the order of the remaining digits.

3. Double the digits at even indices (0, 2, 4, 6, etc.) in the reversed sequence. If any results exceed 9, subtract 9 from those numbers.

4. Sum all the results and add the checking digit.

5. If the result is divisible by 10, the card number is valid; otherwise, it is not valid.

## Architecture

- Data is stored in a Relational Database Management System (RDBMS): SQLite.
- Communication with SQLite requires the use of SQL language.
- The API layer is developed in Python.
- Python algorithms are utilized to manipulate the database through raw queries and parameters.
- Python algorithms are also employed to retrieve information such as exchange rates from external APIs.
