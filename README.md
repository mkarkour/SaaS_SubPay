# Subscription Payment Management Platform

## Goals

Throughout this course, you are expected to achieve 4 main objectives:

1. Design a BPMN of a subscription which represents the product details along with the plan that your customer has to subscribe to. Moreover, you can charge the customer on a recurring basis.
2. Design an ERD schema and its formatting in a SQLite database.
3. Design and implement a backend in Python using algorithms to manage subscriptions in your own SQLite database.
4. Communicate with your backend by using API calls and external APIs.

## Specifications

### Description

You will be creating a platform that enables SaaS (software as a service) companies to gather and monitor payments from their customers. This platform is API first, which means that all operations on the platform can be performed via API calls, and no graphical interface is necessary to use it.

### Companies & Customers

The platform enables SaaS companies to create accounts, for which they need to specify their company names, address, VAT id, and bank account number. Companies can then add customers to their accounts. Customers need to be registered with classical billing information as well.

### Quotes, Subscriptions, Invoices

The platform only allows companies to sell subscriptions-type products. Companies' customers sign up for one or multiple monthly subscriptions that are due each month. The platform does not provide solutions for one-off purchases.

The platform enables companies to quickly create quotes for their customers. A quote contains one or more line items, representing:

1. a subscription for a product or service,
2. a quantity, and
3. a price, including its currency.

All prices are always excluding VAT. The VAT (always 21%) should automatically be calculated on the quote, showing a total excluding VAT and a total including VAT. The expected format of the quote is JSON.

Once a quote is accepted by the customer, companies can easily convert the quote into an active subscription via 1 API call. If a subscription is active, the customer gets automatically invoiced on the last day of each month. For the scope of this project, customers need to call the API to see if they have a pending invoice to proceed with payment.

### Payments

Payments will be "mock" payments for the assignment. To pay a pending invoice, customers will do an API call containing their Credit Card details and the reference number of the invoice. The payment will then be marked as accepted if:

1. The credit card number is valid.
2. The reference number exists in the database.

### Analytics

Companies should be able to retrieve simple statistics about their business, always in euros:

1. Monthly Recurring Revenue (MRR): the predictable total revenue generated by a company from all the active subscriptions in a particular month.
2. Annual Recurring Revenue (ARR): the value of the recurring revenue of a business's term subscriptions normalized for a single calendar year.
3. Number of customers
4. Average revenues per customer
5. A table of all customers with their current subscriptions.

### Currency

The platform always shows numbers in euros at the exchange rate of the day. Exchange rates are retrieved from external APIs and stored in the database.

### Credit Card Validation

Credit card numbers are validated using the Luhn algorithm. The algorithm checks the validity of card numbers based on specific calculations.

## Architecture

- Data are stored in a Relational Database Management System: SQLite
- Communication with SQLite requires the use of SQL language.
- API layer is developed in Python.
- Algorithms in Python are used to manipulate the database based on raw queries and parameters.
- Algorithms in Python are used to retrieve information like exchange rates based on APIs.
